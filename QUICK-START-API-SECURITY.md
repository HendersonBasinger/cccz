# 🔐 API 密钥快速配置指南

## ⚡ 3 分钟快速配置

### 第一步：生成密钥（1分钟）

1. 打开浏览器访问管理后台：`https://你的域名/admin`
2. 登录管理员账号
3. 点击左侧菜单 **"系统设置"**
4. 向下滚动找到 **"API 密钥"** 配置项
5. 点击 **"生成密钥"** 按钮
6. 复制生成的密钥（类似：`a1b2c3d4e5f6...`）
7. 点击 **"保存更改"** 按钮

### 第二步：配置节点（2分钟）

打开 `Node-Worker.js` 文件，找到第 3-4 行：

```javascript
const REMOTE_API_URL = 'https://你的域名/api/users';
const API_TOKEN = '';  // 👈 在这里粘贴密钥
```

将复制的密钥粘贴进去：

```javascript
const REMOTE_API_URL = 'https://你的域名/api/users';
const API_TOKEN = 'a1b2c3d4e5f6你复制的完整密钥';
```

### 第三步：部署验证（30秒）

1. 保存文件
2. 部署到 Cloudflare Workers
3. 访问订阅链接，检查是否正常获取节点

✅ 如果能正常获取节点，说明配置成功！

## 🛡️ 安全性验证

配置完成后，尝试不带密钥访问：
```
https://你的域名/api/users
```

应该看到错误信息：
```json
{
  "success": false,
  "error": "Unauthorized: Missing API token"
}
```

这说明保护已生效！只有带正确密钥的请求才能获取数据。

## 💡 提示

### 如果遇到问题：

**问题 1: 订阅无法获取节点**
- 检查密钥是否完整复制（不要有空格）
- 检查 `REMOTE_API_URL` 是否正确
- 查看 Cloudflare Workers 日志

**问题 2: 仍然可以不带密钥访问**
- 检查管理后台是否保存了密钥
- 刷新管理后台，确认密钥显示在输入框中
- 重启管理端服务

**问题 3: 需要更换密钥**
- 管理后台重新生成新密钥
- 更新所有节点端配置
- 重新部署

## 📞 需要帮助？

查看完整文档：[API-SECURITY-GUIDE.md](./API-SECURITY-GUIDE.md)

---

**重要提醒：**
- ⚠️ 不要将密钥分享给他人
- ⚠️ 不要将密钥提交到公开仓库
- ⚠️ 定期更换密钥（建议 3-6 个月一次）
