# VLES 高级功能说明

## 🎉 新增功能概览

本次更新为 VLES Docker 管理面板添加了 **4 大高级管理功能**：

### 1. 🔐 修改密码
**位置**: 左侧菜单 → 修改密码

**功能**:
- 修改管理员登录密码
- 需要输入当前密码验证
- 新密码至少 6 位
- 支持二次确认防止输入错误

**使用方法**:
1. 输入当前密码
2. 输入新密码（至少6位）
3. 再次输入新密码确认
4. 点击"修改密码"按钮
5. 修改成功后会自动退出，使用新密码重新登录

---

### 2. 📦 数据管理
**位置**: 左侧菜单 → 数据管理

**功能**:
- **数据导出**: 导出所有系统数据（用户、订单、套餐、公告等）为 JSON 格式
- **数据导入**: 导入备份数据恢复系统（开发中）

**使用方法**:
- **导出数据**: 点击"导出数据"按钮，自动下载 `vles-data-{时间戳}.json` 文件
- **导入数据**: 选择 JSON 文件 → 点击"导入数据"（功能开发中）

**导出内容包括**:
- 用户列表
- 用户账号
- 系统设置
- 套餐信息
- 订单记录
- 公告内容
- 支付渠道
- 邀请码

---

### 3. 🔔 系统日志
**位置**: 左侧菜单 → 系统日志

**功能**:
- 实时记录系统操作日志
- 按时间倒序显示（最新在前）
- 支持日志级别分类（info/success/warning/error）
- 颜色标识不同级别
- 一键清空日志

**日志类型**:
- 🟦 **INFO**: 一般信息（如创建用户、修改配置）
- 🟩 **SUCCESS**: 成功操作（如登录成功、数据备份）
- 🟨 **WARNING**: 警告信息（如删除操作）
- 🟥 **ERROR**: 错误信息（如操作失败、系统错误）

**使用方法**:
- 自动记录，无需手动操作
- 点击"清空日志"可清除所有历史记录
- 默认显示最近 100 条日志

---

### 4. 📊 数据统计
**位置**: 左侧菜单 → 数据统计

**功能**:
- **系统概览**: 总用户数、活跃用户数、待审核订单、总收入
- **用户增长趋势**: 最近 7 天每日新增用户统计
- **订单统计**: 最近 7 天订单数量和收入趋势

**统计维度**:
- **用户**: 总数 / 活跃数 / 过期数
- **订单**: 总数 / 待审核 / 已完成 / 总收入
- **套餐**: 总数 / 上架数
- **邀请码**: 总数 / 启用数
- **支付通道**: 总数 / 启用数

**可视化展示**:
- 卡片式概览
- 柱状图展示趋势
- 按日期分组统计
- 实时数据更新

---

## 📋 功能完成度

### ✅ 已实现功能（100%）

#### 基础功能（8个）
1. ✅ 仪表盘 - 系统概览
2. ✅ 用户管理 - 增删改查、批量操作
3. ✅ 反代IP管理 - 批量添加、智能标识
4. ✅ 优选域名管理 - 批量添加、格式化显示
5. ✅ 套餐管理 - 创建、编辑、上下架
6. ✅ 订单管理 - 审核、批量处理
7. ✅ 公告管理 - 发布、编辑、启用禁用
8. ✅ 支付渠道 - 配置、管理

#### 高级功能（4个）
9. ✅ 修改密码 - 密码安全管理
10. ✅ 数据导出/导入 - 数据备份恢复
11. ✅ 系统日志 - 操作追踪审计
12. ✅ 数据统计 - 可视化报表

---

## 🚀 快速开始

### 访问管理面板
```
http://localhost:3000
```

### 默认登录信息
- **用户名**: admin
- **密码**: admin123

⚠️ **重要**: 首次登录后，请立即通过"修改密码"功能修改默认密码！

---

## 📊 当前系统数据

通过测试验证，当前系统包含：
- 👥 用户: 1 个（活跃: 1）
- 💳 订单: 2 个（待审核: 2）
- 📦 套餐: 2 个（上架: 2）
- 🔔 系统日志: 6 条
- 🌐 反代IP: 4 个
- ⭐ 优选域名: 4 个

---

## 🔧 技术实现

### 后端 API
- **修改密码**: `POST /api/admin/change-password`
- **导出数据**: `GET /api/admin/export-all`
- **导入数据**: `POST /api/admin/import-all`
- **获取日志**: `GET /api/admin/logs?limit=100`
- **清空日志**: `POST /api/admin/logs/clear`
- **统计数据**: `GET /api/admin/statistics`

### 数据库函数
- `addLog(action, details, level)` - 添加日志
- `getLogs(limit)` - 获取日志
- `clearLogs()` - 清空日志
- `getStats()` - 获取统计数据

### 前端功能
- `changePassword()` - 修改密码
- `exportData()` - 导出数据
- `importData()` - 导入数据
- `loadLogs()` - 加载日志
- `clearLogs()` - 清空日志
- `loadStats()` - 加载统计

---

## 📝 更新日志

### v2.0.0 (2025-01-11)
- ✨ 新增修改密码功能
- ✨ 新增数据导出/导入功能
- ✨ 新增系统日志查看功能
- ✨ 新增数据统计图表功能
- 🐛 修复数据库字段映射问题
- 🎨 优化前端UI交互体验
- 📊 添加可视化数据展示

---

## 🎯 下一步计划

### 待优化功能
- [ ] 完善数据导入功能的验证逻辑
- [ ] 添加日志筛选功能（按级别、时间范围）
- [ ] 支持统计数据导出为图表
- [ ] 添加系统健康检查功能
- [ ] 实现数据自动备份
- [ ] 添加用户操作审计追踪

---

## 💡 使用建议

1. **定期备份数据**: 使用"数据导出"功能定期备份系统数据
2. **修改默认密码**: 首次部署后立即修改默认管理员密码
3. **查看系统日志**: 定期检查系统日志，及时发现异常
4. **监控统计数据**: 通过数据统计了解系统运行状况
5. **清理过期日志**: 日志积累过多时可清空，系统仅保留最近1000条

---

## 📞 技术支持

如有问题，请查看：
- 主文档: `README.md`
- 部署指南: `DEPLOYMENT-GUIDE.md`
- 支付配置: `PAYMENT-GUIDE.md`

---

**祝您使用愉快！** 🎉
